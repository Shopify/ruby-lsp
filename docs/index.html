<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/ruby-lsp/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/ruby-lsp/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li:not(:nth-child(1)) > a, .site-nav > ul.nav-list:first-child > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(1) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list { display: block; } </style> <script src="/ruby-lsp/assets/js/vendor/lunr.min.js"></script> <script src="/ruby-lsp/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Ruby LSP | An opinionated language server for Ruby. Batteries included!</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Ruby LSP" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="An opinionated language server for Ruby. Batteries included!" /> <meta property="og:description" content="An opinionated language server for Ruby. Batteries included!" /> <link rel="canonical" href="https://shopify.github.io/ruby-lsp/" /> <meta property="og:url" content="https://shopify.github.io/ruby-lsp/" /> <meta property="og:site_name" content="Ruby LSP" /> <meta property="og:image" content="https://shopify.github.io/ruby-lsp/icon.png" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://shopify.github.io/ruby-lsp/icon.png" /> <meta property="twitter:title" content="Ruby LSP" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebSite","description":"An opinionated language server for Ruby. Batteries included!","headline":"Ruby LSP","image":"https://shopify.github.io/ruby-lsp/icon.png","name":"Ruby LSP","url":"https://shopify.github.io/ruby-lsp/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/ruby-lsp/" class="site-title lh-tight"> Ruby LSP </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Ruby LSP category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ruby-lsp/" class="nav-list-link">Ruby LSP</a><ul class="nav-list"><li class="nav-list-item"><a href="/ruby-lsp/editors.html" class="nav-list-link">Editors</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in VS Code extension category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ruby-lsp/vscode-extension.html" class="nav-list-link">VS Code extension</a><ul class="nav-list"><li class="nav-list-item"><a href="/ruby-lsp/test_explorer.html" class="nav-list-link">Test explorer</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Add-ons category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ruby-lsp/add-ons.html" class="nav-list-link">Add-ons</a><ul class="nav-list"><li class="nav-list-item"><a href="/ruby-lsp/test_framework_addons.html" class="nav-list-link">Test framework add-ons</a></li></ul></li><li class="nav-list-item"><a href="/ruby-lsp/design-and-roadmap.html" class="nav-list-link">Design and roadmap</a></li><li class="nav-list-item"><a href="/ruby-lsp/semantic-highlighting.html" class="nav-list-link">Semantic Highlighting for Themes</a></li><li class="nav-list-item"><a href="/ruby-lsp/composed-bundle.html" class="nav-list-link">Composed Ruby LSP bundle</a></li></ul></li><li class="nav-list-item"><a href="/ruby-lsp/rails-add-on.html" class="nav-list-link">Rails add-on</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Troubleshooting category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ruby-lsp/troubleshooting.html" class="nav-list-link">Troubleshooting</a><ul class="nav-list"><li class="nav-list-item"><a href="/ruby-lsp/version-managers.html" class="nav-list-link">Version Managers</a></li></ul></li><li class="nav-list-item"><a href="/ruby-lsp/contributing.html" class="nav-list-link">Contributing</a></li><li class="nav-list-item"><a href="/ruby-lsp/supported_versions.html" class="nav-list-link">Supported Versions Policy</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/Shopify/ruby-lsp" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Ruby LSP on GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://github.com/Shopify/ruby-lsp-rails" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Ruby LSP Rails on GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Ruby LSP" aria-label="Search Ruby LSP" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://shopify.github.io/ruby-lsp/invite" class="site-button" > Ruby DX Slack </a> </li> <li class="aux-nav-list-item"> <a href="https://github.com/Shopify/ruby-lsp/issues/new/choose" class="site-button" > Report an Issue </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="ruby-lsp"> <a href="#ruby-lsp" class="anchor-heading" aria-labelledby="ruby-lsp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ruby LSP </h1> <p align="center"> <img alt="Ruby LSP logo" width="200" src="icon.png" /> </p> <p>The Ruby LSP is an implementation of the <a href="https://microsoft.github.io/language-server-protocol/">language server protocol</a> for Ruby, used to improve rich features in editors. It is a part of a wider goal to provide a state-of-the-art experience to Ruby developers using modern standards for cross-editor features, documentation and debugging.</p> <p>Want to discuss Ruby developer experience? Consider joining the public <a href="invite">Ruby DX Slack workspace</a>.</p> <h2 id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of Contents </h2> <ul> <li><a href="#usage">Usage</a> <ul> <li><a href="#with-vs-code">With VS Code</a></li> <li><a href="#with-other-editors">With other editors</a></li> <li><a href="#composed-ruby-lsp-bundle">Composed Ruby LSP bundle</a></li> <li><a href="#dependency-compatibility">Dependency Compatibility</a></li> </ul> </li> <li><a href="#add-ons">Add-ons</a></li> <li><a href="#general-features">General features</a> <ul> <li><a href="#hover">Hover</a></li> <li><a href="#go-to-definition">Go-to-Definition</a></li> <li><a href="#completion">Completion</a></li> <li><a href="#signature-help">Signature Help</a></li> <li><a href="#code-lens">Code Lens for tests</a></li> <li><a href="#document-symbol">Document symbol</a></li> <li><a href="#workspace-symbol">Workspace symbol</a></li> <li><a href="#document-link">Document link</a></li> <li><a href="#document-highlight">Document highlight</a></li> <li><a href="#folding-range">Folding range</a></li> <li><a href="#semantic-highlighting">Semantic highlighting</a></li> <li><a href="#diagnostics">Diagnostics</a></li> <li><a href="#formatting">Formatting</a></li> <li><a href="#code-actions">Code actions</a></li> <li><a href="#inlay-hints">Inlay hints</a></li> <li><a href="#on-type-formatting">On type formatting</a></li> <li><a href="#selection-range">Selection range</a></li> <li><a href="#show-syntax-tree">Show syntax tree</a></li> <li><a href="#erb-support">ERB support</a></li> <li><a href="#guessed-types">Guessed types</a></li> <li><a href="#rename-symbol">Rename symbol</a></li> <li><a href="#find-references">Find references</a></li> </ul> </li> <li><a href="#vs-code-features">VS Code only features</a> <ul> <li><a href="#dependencies-view">Dependencies view</a></li> <li><a href="#rails-generator-integrations">Rails generator integrations</a></li> <li><a href="#debug-client">Debug client</a></li> <li><a href="#version-manager-integrations">Version manager integrations</a></li> <li><a href="test_explorer">Test explorer</a></li> </ul> </li> <li><a href="#experimental-features">Experimental Features</a> <ul> <li><a href="#ancestors-hierarchy-request">Ancestors Hierarchy Request</a></li> <li><a href="#copilot-chat-participant">Copilot chat participant</a></li> </ul> </li> <li><a href="#configuration">Configuration</a> <ul> <li><a href="#configuring-code-indexing">Configuring code indexing</a></li> </ul> </li> <li><a href="#additional-resources">Additional Resources</a></li> </ul> <h2 id="usage"> <a href="#usage" class="anchor-heading" aria-labelledby="usage"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Usage </h2> <h3 id="with-vs-code"> <a href="#with-vs-code" class="anchor-heading" aria-labelledby="with-vs-code"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> With VS Code </h3> <p>If using VS Code, all you have to do is install the <a href="https://marketplace.visualstudio.com/items?itemName=Shopify.ruby-lsp">Ruby LSP extension</a> to get the extra features in the editor. Do not install the <code class="language-plaintext highlighter-rouge">ruby-lsp</code> gem manually.</p> <p>For more information on using and configuring the extension, see the <a href="vscode-extension">extension page</a>.</p> <h3 id="with-other-editors"> <a href="#with-other-editors" class="anchor-heading" aria-labelledby="with-other-editors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> With other editors </h3> <p>See <a href="editors">editors</a> for community instructions on setting up the Ruby LSP, which currently includes Emacs, Neovim, Sublime Text, and Zed.</p> <p>The gem can be installed by doing</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem <span class="nb">install </span>ruby-lsp
</code></pre></div></div> <p>and the language server can be launched running <code class="language-plaintext highlighter-rouge">ruby-lsp</code> (without bundle exec in order to properly hook into your project’s dependencies).</p> <h3 id="composed-ruby-lsp-bundle"> <a href="#composed-ruby-lsp-bundle" class="anchor-heading" aria-labelledby="composed-ruby-lsp-bundle"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Composed Ruby LSP bundle </h3> <p>The Ruby LSP executable generates a composed bundle with the goal of not requiring users to add the <code class="language-plaintext highlighter-rouge">ruby-lsp</code> gem to their Gemfiles, and at the same time being able to hook into project dependencies. <a href="composed-bundle">Learn more</a>.</p> <h3 id="dependency-compatibility"> <a href="#dependency-compatibility" class="anchor-heading" aria-labelledby="dependency-compatibility"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dependency Compatibility </h3> <p>The Ruby LSP can provide an enhanced experience if RuboCop is present in the project. While using it is optional, if you do choose to include RuboCop, make sure it’s version 1.4.0 or higher.</p> <h2 id="add-ons"> <a href="#add-ons" class="anchor-heading" aria-labelledby="add-ons"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add-ons </h2> <p>The Ruby LSP provides an add-on system that allows other gems to enhance the base functionality with more editor features. This is the mechanism that powers add-ons like</p> <ul> <li><a href="https://github.com/Shopify/ruby-lsp-rails">Ruby LSP Rails</a></li> <li><a href="https://github.com/st0012/ruby-lsp-rspec">Ruby LSP RSpec</a></li> <li><a href="https://github.com/jscharf/ruby-lsp-rubyfmt">Ruby LSP rubyfmt</a></li> </ul> <p>Additionally, some tools may include a Ruby LSP add-on directly, like</p> <ul> <li><a href="https://github.com/standardrb/standard/wiki/IDE:-vscode#using-ruby-lsp">Standard Ruby (from v1.39.1)</a></li> </ul> <p>Other community driven add-ons can be found:</p> <ul> <li>by searching <a href="https://rubygems.org/search?query=name%3A+ruby-lsp">rubygems</a> for the <code class="language-plaintext highlighter-rouge">ruby-lsp</code> prefix</li> <li>in the community driven list of <a href="https://github.com/johansenja/awesome-ruby-lsp">awesome-ruby-lsp</a></li> </ul> <p>For instructions on how to create add-ons, see the <a href="add-ons">add-ons documentation</a>.</p> <h2 id="general-features"> <a href="#general-features" class="anchor-heading" aria-labelledby="general-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> General features </h2> <p class="note">Note that none of the features in this section are specific to Ruby; they are general to all programming languages. Becoming familiar with them will enhance your ability to use the editor effectively.<br /><br /> If you’re using VS Code, we recommend their excellent <a href="https://code.visualstudio.com/docs">guides and documentation</a> to learn more about the editor’s philosophy and feature set.</p> <h3 id="hover"> <a href="#hover" class="anchor-heading" aria-labelledby="hover"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hover </h3> <p>The hover feature displays comments or documentation for the target constant or method when the cursor hovers over them.</p> <p>In VS Code, if you hover while pressing <code class="language-plaintext highlighter-rouge">Command</code>, it will also send a <code class="language-plaintext highlighter-rouge">definition</code> request to locate the possible target sources. And it will display the target’s source code if only one source is located (e.g., the class is not reopened in multiple places).</p> <video src="images/ruby-lsp-hover-demo-basic.mp4" width="100%" controls=""> Sorry, your browser doesn't support embedded videos. This video demonstrates the hover feature, showing how comments and documentation are displayed for the target constant or method. </video> <h3 id="go-to-definition"> <a href="#go-to-definition" class="anchor-heading" aria-labelledby="go-to-definition"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Go-to-Definition </h3> <p>Go-to-definition allows users to navigate to the target constant or method’s definition, whether they’re defined in your project or its dependencies.</p> <p>In VS Code this feature can be triggered by one of the following methods:</p> <ul> <li><code class="language-plaintext highlighter-rouge">Right click</code> on the target, and then select <code class="language-plaintext highlighter-rouge">Go to Definition</code></li> <li>Placing the cursor on the target, and then hit <code class="language-plaintext highlighter-rouge">F12</code></li> <li><code class="language-plaintext highlighter-rouge">Command + click</code> the target</li> </ul> <p><strong>With One Definition:</strong></p> <p>Users are taken directly to the source.</p> <video src="images/ruby-lsp-definition-demo-basic.mp4" width="100%" controls=""> Sorry, your browser doesn't support embedded videos. This video shows the go-to-definition feature in action, navigating directly to the source of the target constant or method. </video> <p><strong>With Multiple Definitions:</strong></p> <p>Users see a dropdown with all the sources, along with a preview window on the side.</p> <video src="images/ruby-lsp-definition-demo-multi-source.mp4" width="100%" controls=""> Sorry, your browser doesn't support embedded videos. This video demonstrates the go-to-definition feature when multiple definitions are found, showing the dropdown and preview window. </video> <h3 id="completion"> <a href="#completion" class="anchor-heading" aria-labelledby="completion"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Completion </h3> <p>The completion feature provides users with completion candidates when the text they type matches certain indexed components. This helps speed up coding by reducing the need to type out full method names or constants. It also allows developers to discover constants or methods that are available to them.</p> <video src="images/ruby-lsp-completion-demo-basic.mp4" width="100%" controls=""> Sorry, your browser doesn't support embedded videos. This video illustrates the completion feature, providing completion candidates as the user types. </video> <p class="note">Completion for method calls can only be provided when the type of the receiver is known. For example, when typing <code class="language-plaintext highlighter-rouge">foo.</code> it’s only possible to show method completion candidates if know the type of <code class="language-plaintext highlighter-rouge">foo</code>. Since the Ruby LSP does not require users to adopt a type system, completion for methods ends up being available only when types can be determined even without annotations (e.g.: methods invoked on literals, constants, direct instantiations of objects using <code class="language-plaintext highlighter-rouge">new</code>).<br /><br /> If you would like to have more accurate completion, consider adopting a <a href="design-and-roadmap#accuracy-correctness-and-type-checking">type system</a>.</p> <h3 id="signature-help"> <a href="#signature-help" class="anchor-heading" aria-labelledby="signature-help"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Signature Help </h3> <p>Signature help often appears right after users finish typing a method, providing hints about the method’s parameters. This feature is invaluable for understanding the expected arguments and improving code accuracy.</p> <video src="images/ruby-lsp-signature-help-demo-basic.mp4" width="100%" controls=""> Sorry, your browser doesn't support embedded videos. This video demonstrates the signature help feature, showing hints about the parameters the target method takes. </video> <h3 id="code-lens"> <a href="#code-lens" class="anchor-heading" aria-labelledby="code-lens"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Code Lens </h3> <p>Code lenses are buttons that are added automatically depending on the context of the code. The Ruby LSP supports code lenses for unit tests, allowing you to run tests using <a href="#test-explorer">VS Code’s test explorer</a>, run the tests in the terminal or launch the debugger.</p> <p class="note">The <a href="https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#textDocument_codeLens">code lens</a> request requires specific commands to be implemented in the editor in order to work. For VS Code, this is included with the Ruby LSP extension. If you are using a different editor, please check the editor’s documentation on how to define the required commands.</p> <p><img src="images/code_lens.gif" alt="Code lens demo" /></p> <h3 id="document-symbol"> <a href="#document-symbol" class="anchor-heading" aria-labelledby="document-symbol"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Document symbol </h3> <p>Document symbol allows users to fuzzy search declarations inside the current file. It is also used to populate the breadcrumbs and the outline.</p> <p><img src="images/document_symbol.gif" alt="Document symbol demo" /></p> <h3 id="workspace-symbol"> <a href="#workspace-symbol" class="anchor-heading" aria-labelledby="workspace-symbol"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Workspace symbol </h3> <p>Workspace symbol is the project-wide version of document symbol. It allows users to fuzzy search any declaration in the entire project.</p> <p><img src="images/workspace_symbol.gif" alt="Workspace symbol demo" /></p> <h3 id="document-link"> <a href="#document-link" class="anchor-heading" aria-labelledby="document-link"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Document link </h3> <p>Document link makes magic <code class="language-plaintext highlighter-rouge">source</code> links clickable. This is used to connect two declarations for convenience. Note that the links are only processed if they are immediately above a declaration and not anywhere in the code.</p> <p><img src="images/document_link.gif" alt="Document link demo" /></p> <h3 id="document-highlight"> <a href="#document-highlight" class="anchor-heading" aria-labelledby="document-highlight"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Document highlight </h3> <p>Document highlight reveals occurrences and declarations of the entity under the cursor.</p> <p><img src="images/document_highlight.gif" alt="Document highlight demo" /></p> <h3 id="folding-range"> <a href="#folding-range" class="anchor-heading" aria-labelledby="folding-range"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Folding range </h3> <p>Folding range allows users to fold code at relevant ranges of the source.</p> <p><img src="images/folding_range.gif" alt="Folding range demo" /></p> <h3 id="semantic-highlighting"> <a href="#semantic-highlighting" class="anchor-heading" aria-labelledby="semantic-highlighting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Semantic highlighting </h3> <p>The semantic highlighting removes ambiguity from the language to achieve consistent editor highlighting. For example, with TextMate grammars alone, local variables and method invocations with no receivers or parenthesis can be confused, often resulting in incorrect highlighting.</p> <p>The Ruby LSP’s strategy for semantic highlighting is to return as few tokens as possible to ensure accurate highlighting. Processing a large number of tokens is expensive for editors and may result in lag.</p> <p class="note">Semantic highlighting simply informs the editor of what type of tokens exist in a file. For example, the Ruby LSP tells the editor “this is a local variable” or “this is a method call”. However, this does not mean that themes necessarily make use of that information or that they support semantic highlighting.<br /><br /> The <a href="https://marketplace.visualstudio.com/items?itemName=Shopify.ruby-extensions-pack">Ruby extensions pack extension</a> includes the <a href="https://github.com/Shopify/vscode-shopify-ruby?tab=readme-ov-file#themes">Spinel</a> theme, which is tailored for use with the Ruby language by fully leveraging all of Ruby LSP’s semantic information.<br /><br /> If you wish to add better Ruby support to other themes, see <a href="semantic-highlighting">the semantic highlighting for themes docs</a>.</p> <p><img src="images/semantic_highlighting.png" alt="Semantic highlighting demo" /></p> <h3 id="diagnostics"> <a href="#diagnostics" class="anchor-heading" aria-labelledby="diagnostics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Diagnostics </h3> <p>Diagnostics are linting, error, warning and any other type of information that gets surfaced based on the current state of the code. The Ruby LSP has native support for syntax errors and also supports showing linting errors.</p> <p class="note">You can configure which linters to use as long as they have integrations for the Ruby LSP. Check the available <a href="editors#all-initialization-options">configurations</a>.</p> <p><img src="images/diagnostic.gif" alt="Diagnostic demo" /></p> <h3 id="formatting"> <a href="#formatting" class="anchor-heading" aria-labelledby="formatting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Formatting </h3> <p>Formatting allows documents to be formatted automatically on save or manually if the editor supports it.</p> <p><img src="images/formatting.gif" alt="Formatting demo" /></p> <h3 id="code-actions"> <a href="#code-actions" class="anchor-heading" aria-labelledby="code-actions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Code actions </h3> <p><strong>Quick fixes</strong></p> <p>The Ruby LSP supports fixing violations through quick fixes.</p> <p><img src="images/quickfix.gif" alt="Quickfix demo" /></p> <p><strong>Refactors</strong></p> <p>The Ruby LSP supports some code refactorings, like extract to variable, extract to method and switch block style.</p> <p><img src="images/refactors.gif" alt="Refactors demo" /></p> <h3 id="inlay-hints"> <a href="#inlay-hints" class="anchor-heading" aria-labelledby="inlay-hints"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Inlay hints </h3> <p>Inlay hints display implicit information explicitly to the user. The goal is to make implicit behavior more discoverable and visible.</p> <p>By default, only implicit rescue hints are displayed. VS Code users can use the following settings to customize inlay hint behavior:</p> <div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="c1">// Enable all hints</span><span class="w">
    </span><span class="nl">"rubyLsp.featuresConfiguration.inlayHint.enableAll"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="c1">// Enable implicit rescue (defaults to true)</span><span class="w">
    </span><span class="nl">"rubyLsp.featuresConfiguration.inlayHint.implicitRescue"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="c1">// Enable implicit hash values (omitted hash values)</span><span class="w">
    </span><span class="nl">"rubyLsp.featuresConfiguration.inlayHint.implicitHashValue"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>To configure other editors, see the <a href="editors#all-initialization-options">initialization options</a>.</p> <p><img src="images/inlay_hint.gif" alt="Inlay hint demo" /></p> <h3 id="on-type-formatting"> <a href="#on-type-formatting" class="anchor-heading" aria-labelledby="on-type-formatting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> On type formatting </h3> <p>On type formatting applies changes to the code as the user is typing. For example, the Ruby LSP auto completes the <code class="language-plaintext highlighter-rouge">end</code> tokens when breaking lines.</p> <p class="note">In VS Code, format on type is disabled by default. You can enable it with <code class="language-plaintext highlighter-rouge">"editor.formatOnType": true</code></p> <p><img src="images/on_type_formatting.gif" alt="On type formatting demo" /></p> <h3 id="range-formatting"> <a href="#range-formatting" class="anchor-heading" aria-labelledby="range-formatting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Range formatting </h3> <p>Range formatting allows users to format a selection in the editor, without formatting the entire file. It is also the feature that enables format on paste to work.</p> <p class="note">In VS Code, format on paste is disabled by default. You can enable it with <code class="language-plaintext highlighter-rouge">"editor.formatOnPaste": true</code></p> <p class="note">Currently, only the <a href="https://github.com/ruby-syntax-tree/syntax_tree">Syntax Tree</a> formatter has support for partially formatting a file. Supporting range formatting for RuboCop or Standard requires new APIs to be exposed so that the Ruby LSP can inform the formatter of the base indentation at the place of the selection. Additionally, the formatter can only apply corrections that make sense for the portion of the document.</p> <p><img src="images/range_formatting.gif" alt="Range formatting demo" /></p> <h3 id="selection-range"> <a href="#selection-range" class="anchor-heading" aria-labelledby="selection-range"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Selection range </h3> <p>Selection range (or smart ranges) expands or shrinks a selection based on the code’s constructs. In VS Code, this can be triggered with <code class="language-plaintext highlighter-rouge">CTRL + SHIFT + LEFT/RIGHT ARROW</code> to expand/shrink, respectively.</p> <p><img src="images/selection_range.gif" alt="Selection range demo" /></p> <h3 id="show-syntax-tree"> <a href="#show-syntax-tree" class="anchor-heading" aria-labelledby="show-syntax-tree"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Show syntax tree </h3> <p>Show syntax tree displays the Abstract Syntax Tree (AST) for the current Ruby document. This custom feature can either show the AST for the entire document or for a selection.</p> <p class="note">This feature is not a part of the language server specification. It is a custom feature, which is implemented in the Ruby LSP’s VS Code extension. Other editors can implement a similar approach to achieve the same functionality</p> <p><img src="images/show_syntax_tree.gif" alt="Show syntax tree demo" /></p> <h3 id="erb-support"> <a href="#erb-support" class="anchor-heading" aria-labelledby="erb-support"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ERB support </h3> <p>The Ruby LSP can process ERB files and handle both the embedded Ruby and the host language portions of the file. For the embedded Ruby part, the Ruby LSP responds with all Ruby features you would normally see in regular Ruby files. For features for the host language, like HTML, the Ruby LSP delegates the requests to the language service registered to handle that file type.</p> <p class="note">Request delegation has not yet been formalized as part of the LSP specification. Therefore, this requires custom code on the client (editor) side. The Ruby LSP VS Code extension ships with that custom implementation, but other editors will need to implement the same to support these features</p> <p class="important">The delegation of certain JavaScript features works partially. For example, completion inside an <code class="language-plaintext highlighter-rouge">onclick</code> attribute will sometimes display incorrect candidates. We believe this might be a limitation of request delegation in general and we’ve opened a <a href="https://github.com/microsoft/vscode-discussions/discussions/1628">discussion with VS Code</a> to better understand it.</p> <p><img src="images/erb.gif" alt="ERB features demo" /></p> <h3 id="guessed-types"> <a href="#guessed-types" class="anchor-heading" aria-labelledby="guessed-types"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Guessed types </h3> <p>Guessed types is a feature where the Ruby LSP attempts to identify the type of a receiver based on its identifier. For example:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># The receiver identifier here is `user` and so the Ruby LSP will assign to it the `User` type if that class exists</span>
<span class="n">user</span><span class="p">.</span><span class="nf">name</span>

<span class="c1"># Similarly, the receiver identifier here is `post` and so the LSP searches for the `Post` class</span>
<span class="vi">@post</span><span class="p">.</span><span class="nf">like!</span>
</code></pre></div></div> <blockquote class="important"> <p>The goal of this experiment is to understand if we can get better accuracy for the code that you already have. The hypothesis is that a reasonable amount of code already uses patterns like the ones in the example and, in those cases, we can achieve nicer results.</p> <p>However, identifiers are not the ideal medium for proper type annotations. It would not be possible to express anything complex, such as unions, intersections or generics. Additionally, it is very trivial to fool the type guessing by simply naming a variable with a type name that doesn’t match its actual type.</p> </blockquote> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pathname</span> <span class="o">=</span> <span class="n">something_that_returns_an_integer</span>
<span class="c1"># This will show methods available in `Pathname`, despite the variable being an Integer</span>
<span class="n">pathname</span><span class="p">.</span><span class="nf">a</span>
</code></pre></div></div> <p>We do not recommend renaming methods, instance variables or local variables for the sole purpose of getting better accuracy - readability should always come first. For example:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># It would not be a good idea to name every string "string" for the sake of getting better accuracy.</span>
<span class="c1"># Using descriptive names will outweigh the benefits of the more accurate editor experience</span>

<span class="c1"># don't</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">something</span><span class="p">.</span><span class="nf">other_thing</span>

<span class="c1"># do</span>
<span class="n">title</span> <span class="o">=</span> <span class="n">something</span><span class="p">.</span><span class="nf">other_thing</span>
<span class="nb">name</span> <span class="o">=</span> <span class="n">foo</span>
</code></pre></div></div> <p>That said, this feature can also be used for quickly exploring methods available in classes. Simply type the lower case name of the class and completion can show the methods available.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Any class name as an identifier</span>
<span class="n">pathname</span><span class="p">.</span><span class="nf">a</span>
<span class="n">integer</span><span class="p">.</span><span class="nf">a</span>
<span class="n">file</span><span class="p">.</span><span class="nf">a</span>
</code></pre></div></div> <p>To guess types, the Ruby LSP will first try to resolve a constant based on the receiver identifier and current nesting. If that does not identify any valid types, then it will fallback to matching based on the first match for the unqualified type name. For example:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">Admin</span>
  <span class="k">class</span> <span class="nc">User</span>
  <span class="k">end</span>

  <span class="c1"># Will match to `Admin::User` because the `user` reference is inside the `Admin` namespace</span>
  <span class="n">user</span><span class="p">.</span><span class="nf">a</span>
<span class="k">end</span>

<span class="k">module</span> <span class="nn">Blog</span>
  <span class="k">class</span> <span class="nc">User</span>
  <span class="k">end</span>

  <span class="c1"># Will match to `Blog::User` because the `user` reference is inside the `Blog` namespace</span>
  <span class="n">user</span><span class="p">.</span><span class="nf">a</span>
<span class="k">end</span>

<span class="c1"># Will match to the first class that has the unqualified name of `User`. This may return `Admin::User` or `Blog::User`</span>
<span class="c1"># randomly</span>
<span class="n">user</span><span class="p">.</span><span class="nf">a</span>
</code></pre></div></div> <h3 id="rename-symbol"> <a href="#rename-symbol" class="anchor-heading" aria-labelledby="rename-symbol"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Rename symbol </h3> <p>Rename allows developers to rename all occurrences of the entity under the cursor across the entire project. In VS Code renaming can be triggered by right clicking the entity to rename or by pressing F2 on it. You can also preview the edits that will be applied by pressing CTRL/CMD + Enter after typing the desired new name.</p> <p>Rename is currently only supported for constants, module names and class names.</p> <p><img src="images/rename.gif" alt="Rename demo" /></p> <h3 id="find-references"> <a href="#find-references" class="anchor-heading" aria-labelledby="find-references"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Find references </h3> <p>The find references request allows users to both see a list of references or jump to reference locations. Note that only constants are currently supported, but support for methods, instance variables and local variables is planned.</p> <p><img src="images/references.gif" alt="References demo" /></p> <h2 id="vs-code-features"> <a href="#vs-code-features" class="anchor-heading" aria-labelledby="vs-code-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> VS Code features </h2> <p>The following features are all custom made for VS Code.</p> <h3 id="dependencies-view"> <a href="#dependencies-view" class="anchor-heading" aria-labelledby="dependencies-view"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dependencies view </h3> <p>The Ruby LSP contributes a custom dependencies view panel that allows users to navigate the dependencies of their projects.</p> <p><img src="images/dependencies_view.gif" alt="Dependencies view demo" /></p> <h3 id="rails-generator-integrations"> <a href="#rails-generator-integrations" class="anchor-heading" aria-labelledby="rails-generator-integrations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Rails generator integrations </h3> <p>The Ruby LSP integrates with Rails generators, which can be invoked through the UI. All generated files are automatically opened and formatted using the project’s formatting configurations.</p> <p><img src="images/rails_generate.png" alt="Generator demo" /></p> <h3 id="debug-client"> <a href="#debug-client" class="anchor-heading" aria-labelledby="debug-client"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Debug client </h3> <p>The Ruby LSP ships with a client for the <a href="https://github.com/ruby/debug">debug gem</a>. The client allows functionality such as <a href="#code-lens">code lens</a>, but also enables launch configurations for starting a process with the visual debugger or attaching to an existing server.</p> <h3 id="version-manager-integrations"> <a href="#version-manager-integrations" class="anchor-heading" aria-labelledby="version-manager-integrations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Version manager integrations </h3> <p>When working on many projects with different Ruby versions, the Ruby LSP needs to know which Ruby version is being used and where gems are installed in order to support automatic dependency detection and indexing.</p> <p>We support custom built integrations with the following version managers for automatic version switching with no need for any user actions:</p> <ul> <li><a href="https://github.com/asdf-vm/asdf">asdf</a></li> <li><a href="https://github.com/postmodern/chruby">chruby</a></li> <li><a href="https://github.com/jdx/mise">mise</a></li> <li><a href="https://github.com/rbenv/rbenv">rbenv</a></li> <li><a href="https://rubyinstaller.org">RubyInstaller</a></li> <li><a href="https://github.com/rvm/rvm">rvm</a></li> <li><a href="https://github.com/Shopify/shadowenv">shadowenv</a></li> </ul> <p>Additionally, we provide the following escape hatches if the custom integrations are not enough:</p> <ul> <li>custom: define a custom shell script to activate the Ruby environment on any project</li> <li>none: do nothing and rely on the environment inherited by VS Code</li> </ul> <p class="important">Most version managers have some shell component to them in order to mutate the user’s environment in a terminal and point to the correct Ruby version. For this reason, the VS Code extension must invoke the user’s shell from the NodeJS process where it is running - otherwise the version manager wouldn’t be available for the integration.<br /><br /> This can sometimes lead to Ruby environment activation problems. For example, certain shell plugins expect variables set by terminals to be present and fail if they aren’t. The NodeJS process running the extension will not have set these variables and therefore will be likely to fail.<br /><br /> Finding a general solution to this problem is not trivial due to the number of different combinations of operating systems, shells, plugins and version managers. On top of those, people configure their shell environments differently. For example, some users may source their version managers in <code class="language-plaintext highlighter-rouge">~/.zshrc</code> while others will do it in <code class="language-plaintext highlighter-rouge">~/.zshenv</code> or <code class="language-plaintext highlighter-rouge">~/.zprofile</code>.<br /><br /> If experiencing issues, keep in mind that shell configurations could be interfering, check <a href="troubleshooting">troubleshooting</a> and, if none of the listed solutions work, please <a href="https://github.com/Shopify/ruby-lsp/issues/new/choose">report an issue</a>.</p> <h2 id="experimental-features"> <a href="#experimental-features" class="anchor-heading" aria-labelledby="experimental-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Experimental Features </h2> <p>Ruby LSP also provides experimental features that are not enabled by default. If you have feedback about these features, you can let us know in the <a href="invite">DX Slack</a> or by <a href="https://github.com/Shopify/ruby-lsp/issues/new/choose">creating an issue</a>.</p> <h3 id="ancestors-hierarchy-request"> <a href="#ancestors-hierarchy-request" class="anchor-heading" aria-labelledby="ancestors-hierarchy-request"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ancestors Hierarchy Request </h3> <p>The ancestors hierarchy request feature aims to provide a better understanding of the inheritance hierarchy within your Ruby code. This feature helps developers trace the lineage of their classes and modules, making it easier to:</p> <ul> <li>Visualize the inheritance hierarchy of classes and modules.</li> <li>Quickly navigate through the inheritance chain.</li> </ul> <video src="images/ruby-lsp-type-hierarchy-demo.mp4" width="100%" controls=""> Sorry, your browser doesn't support embedded videos. This video demonstrates the ancestors hierarchy request feature, visualizing the inheritance hierarchy. </video> <h4 id="why-is-it-experimental"> <a href="#why-is-it-experimental" class="anchor-heading" aria-labelledby="why-is-it-experimental"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Why Is It Experimental? </h4> <p>This feature is supported by the <a href="https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#typeHierarchy_supertypes">Type Hierarchy Supertypes LSP request</a>. During implementation, we encountered some ambiguities when applying it to Ruby. For example:</p> <ul> <li>Should the list include only classes (pure inheritance chain), or should it include modules too (current behavior)?</li> <li>How should the inheritance chain of singleton classes be triggered and displayed?</li> <li>If a class or module is reopened multiple times, it will appear multiple times in the list. In real-world applications, this can make the list very long.</li> </ul> <p>We created <a href="https://github.com/microsoft/language-server-protocol/issues/1984">an issue</a> to seek clarification from the LSP maintainers. We will adjust this feature’s design and behavior based on their response and your feedback.</p> <h3 id="copilot-chat-participant"> <a href="#copilot-chat-participant" class="anchor-heading" aria-labelledby="copilot-chat-participant"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Copilot chat participant </h3> <p>The Ruby LSP includes a Copilot chat participant that comes with built-in knowledge of Ruby and Rails commands, helping you build these commands efficiently.</p> <p><img src="images/chat_participant.png" alt="Chat participant demo" /></p> <h2 id="configuration"> <a href="#configuration" class="anchor-heading" aria-labelledby="configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration </h2> <h3 id="configuring-code-indexing"> <a href="#configuring-code-indexing" class="anchor-heading" aria-labelledby="configuring-code-indexing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuring code indexing </h3> <p>By default, the Ruby LSP indexes all Ruby files defined in the current project and all of its dependencies, including default gems, except for</p> <ul> <li>Gems that only appear under the <code class="language-plaintext highlighter-rouge">:development</code> group</li> <li>All Ruby files under <code class="language-plaintext highlighter-rouge">test/**/*.rb</code></li> </ul> <p>This behavior can be overridden and tuned. Learn how to configure it <a href="vscode-extension#indexing-configuration">for VS Code</a>.</p> <p>Note that indexing-dependent behavior, such as definition, hover, completion or workspace symbol will be impacted by the configuration changes.</p> <p>The older approach of using a <code class="language-plaintext highlighter-rouge">.index.yml</code> file has been deprecated and will be removed in a future release.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Exclude files based on a given pattern. Often used to exclude test files or fixtures</span>
<span class="na">excluded_patterns</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">**/spec/**/*.rb"</span>

<span class="c1"># Include files based on a given pattern. Can be used to index Ruby files that use different extensions</span>
<span class="na">included_patterns</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">**/bin/*"</span>

<span class="c1"># Exclude gems by name. If a gem is never referenced in the project's code and is only used as a tool, excluding it will</span>
<span class="c1"># speed up indexing and reduce the amount of results in features like definition or completion</span>
<span class="na">excluded_gems</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">rubocop</span>
  <span class="pi">-</span> <span class="s">pathname</span>

<span class="c1"># Include gems by name. Normally used to include development gems that are excluded by default</span>
<span class="na">included_gems</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">prism</span>
</code></pre></div></div> <h2 id="additional-resources"> <a href="#additional-resources" class="anchor-heading" aria-labelledby="additional-resources"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Additional Resources </h2> <ul> <li><a href="https://www.youtube.com/watch?v=kEfXPTm1aCI">RubyConf 2022: Improving the development experience with language servers</a> (<a href="https://github.com/vinistock">Vinicius Stock</a>)</li> <li><a href="https://remoteruby.com/221">Remote Ruby: Ruby Language Server with Vinicius Stock</a></li> <li><a href="https://www.youtube.com/watch?v=ks3tQojSJLU">RubyKaigi 2023: Code indexing - How language servers understand our code</a> (<a href="https://github.com/vinistock">Vinicius Stock</a>)</li> </ul> <hr> <h2 class="text-delta">Table of contents</h2> <ul> <li> <a href="/ruby-lsp/editors.html">Editors</a> </li> <li> <a href="/ruby-lsp/vscode-extension.html">VS Code extension</a> </li> <li> <a href="/ruby-lsp/add-ons.html">Add-ons</a> </li> <li> <a href="/ruby-lsp/design-and-roadmap.html">Design and roadmap</a> </li> <li> <a href="/ruby-lsp/semantic-highlighting.html">Semantic Highlighting for Themes</a> </li> <li> <a href="/ruby-lsp/composed-bundle.html">Composed Ruby LSP bundle</a> </li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>

<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/ruby-lsp/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/ruby-lsp/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(1) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/ruby-lsp/assets/js/vendor/lunr.min.js"></script> <script src="/ruby-lsp/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>VS Code extension | Ruby LSP</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="VS Code extension" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="An opinionated language server for Ruby. Batteries included!" /> <meta property="og:description" content="An opinionated language server for Ruby. Batteries included!" /> <link rel="canonical" href="https://shopify.github.io/ruby-lsp/vscode-extension.html" /> <meta property="og:url" content="https://shopify.github.io/ruby-lsp/vscode-extension.html" /> <meta property="og:site_name" content="Ruby LSP" /> <meta property="og:image" content="https://shopify.github.io/ruby-lsp/icon.png" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://shopify.github.io/ruby-lsp/icon.png" /> <meta property="twitter:title" content="VS Code extension" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"An opinionated language server for Ruby. Batteries included!","headline":"VS Code extension","image":"https://shopify.github.io/ruby-lsp/icon.png","url":"https://shopify.github.io/ruby-lsp/vscode-extension.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/ruby-lsp/" class="site-title lh-tight"> Ruby LSP </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Ruby LSP category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ruby-lsp/" class="nav-list-link">Ruby LSP</a><ul class="nav-list"><li class="nav-list-item"><a href="/ruby-lsp/editors.html" class="nav-list-link">Editors</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in VS Code extension category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ruby-lsp/vscode-extension.html" class="nav-list-link">VS Code extension</a><ul class="nav-list"><li class="nav-list-item"><a href="/ruby-lsp/test_explorer.html" class="nav-list-link">Test explorer</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Add-ons category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ruby-lsp/add-ons.html" class="nav-list-link">Add-ons</a><ul class="nav-list"><li class="nav-list-item"><a href="/ruby-lsp/test_framework_addons.html" class="nav-list-link">Test framework add-ons</a></li></ul></li><li class="nav-list-item"><a href="/ruby-lsp/design-and-roadmap.html" class="nav-list-link">Design and roadmap</a></li><li class="nav-list-item"><a href="/ruby-lsp/semantic-highlighting.html" class="nav-list-link">Semantic Highlighting for Themes</a></li><li class="nav-list-item"><a href="/ruby-lsp/composed-bundle.html" class="nav-list-link">Composed Ruby LSP bundle</a></li></ul></li><li class="nav-list-item"><a href="/ruby-lsp/rails-add-on.html" class="nav-list-link">Rails add-on</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Troubleshooting category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ruby-lsp/troubleshooting.html" class="nav-list-link">Troubleshooting</a><ul class="nav-list"><li class="nav-list-item"><a href="/ruby-lsp/version-managers.html" class="nav-list-link">Version Managers</a></li></ul></li><li class="nav-list-item"><a href="/ruby-lsp/contributing.html" class="nav-list-link">Contributing</a></li><li class="nav-list-item"><a href="/ruby-lsp/supported_versions.html" class="nav-list-link">Supported Versions Policy</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/Shopify/ruby-lsp" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Ruby LSP on GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://github.com/Shopify/ruby-lsp-rails" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Ruby LSP Rails on GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Ruby LSP" aria-label="Search Ruby LSP" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://shopify.github.io/ruby-lsp/invite" class="site-button" > Ruby DX Slack </a> </li> <li class="aux-nav-list-item"> <a href="https://github.com/Shopify/ruby-lsp/issues/new/choose" class="site-button" > Report an Issue </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/ruby-lsp/">Ruby LSP</a></li> <li class="breadcrumb-nav-list-item"><span>VS Code extension</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="ruby-lsp"> <a href="#ruby-lsp" class="anchor-heading" aria-labelledby="ruby-lsp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ruby LSP </h1> <p>The Ruby LSP is an implementation of the <a href="https://microsoft.github.io/language-server-protocol/">language server protocol</a> for Ruby, used to improve rich features in editors.</p> <h2 id="features"> <a href="#features" class="anchor-heading" aria-labelledby="features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Features </h2> <p><img src="images/ruby_lsp_demo.gif" alt="Ruby LSP demo" /></p> <p>The Ruby LSP features include</p> <ul> <li>Semantic highlighting</li> <li>Symbol search and code outline</li> <li>RuboCop errors and warnings (diagnostics)</li> <li>Format on save (with RuboCop or Syntax Tree)</li> <li>Format on type</li> <li>Debugging support</li> <li>Running and debugging tests through VS Code’s UI</li> <li>Go to definition</li> <li>Showing documentation on hover</li> <li>Completion</li> <li>Fuzzy search declarations anywhere in the project (workspace symbol)</li> <li>Running Rails generators from the UI</li> </ul> <p>See complete information about features <a href="https://shopify.github.io/ruby-lsp">here</a>.</p> <p>If you experience issues, please see the <a href="troubleshooting">troubleshooting guide</a>.</p> <h3 id="experimental-github-copilot-chat-agent"> <a href="#experimental-github-copilot-chat-agent" class="anchor-heading" aria-labelledby="experimental-github-copilot-chat-agent"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> [Experimental] GitHub Copilot chat agent </h3> <p>For users of Copilot, the Ruby LSP contributes a Ruby agent for AI assisted development of Ruby applications. Below you can find the documentation of each command for the Ruby agent. For information about how to interact with Copilot Chat, check <a href="https://code.visualstudio.com/docs/copilot/copilot-chat">VS Code’s official documentation</a>.</p> <h4 id="design-command"> <a href="#design-command" class="anchor-heading" aria-labelledby="design-command"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Design command </h4> <p>The <code class="language-plaintext highlighter-rouge">@ruby /design</code> command is intended to be a domain driven design expert to help users model concepts for their Rails applications. Users should describe what type of application they are building and which concept they are trying to model. The command will read their Rails application’s schema and use their prompt, previous interactions and the schema information to provide suggestions of how to design the application. For example,</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@ruby /design I'm working on a web application for schools.
How do I model courses? And how do they relate to students?
</code></pre></div></div> <p>The output is a suggested schema for courses including relationships with users. In the chat window, two buttons will appear: <code class="language-plaintext highlighter-rouge">Generate with Rails</code>, which invokes the Rails generators to create the models suggested, and <code class="language-plaintext highlighter-rouge">Revert previous generation</code>, which will delete files generated by a previous click in the generate button.</p> <p>As with most LLM chat functionality, suggestions may not be fully accurate, especially in the first iteration. Users can continue chatting with the <code class="language-plaintext highlighter-rouge">@ruby</code> agent to fine tune the suggestions given, before deciding to move forward with generation.</p> <p>If you have feedback about this feature, you can let us know in the <a href="invite">DX Slack</a> or by <a href="https://github.com/Shopify/ruby-lsp/issues/new">creating an issue</a>.</p> <h2 id="usage"> <a href="#usage" class="anchor-heading" aria-labelledby="usage"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Usage </h2> <p>Search for <code class="language-plaintext highlighter-rouge">Shopify.ruby-lsp</code> in the extensions tab and click install.</p> <p>By default, the Ruby LSP will generate a <code class="language-plaintext highlighter-rouge">.ruby-lsp</code> directory with a composed bundle that includes the server gem. Additionally, it will attempt to use available version managers to select the correct Ruby version for any given project. Refer to configuration for more options.</p> <h3 id="commands"> <a href="#commands" class="anchor-heading" aria-labelledby="commands"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Commands </h3> <p>Available commands are listed below and can always be found by searching for the <code class="language-plaintext highlighter-rouge">Ruby LSP</code> prefix in the command palette (Default hotkey: CMD + SHIFT + P).</p> <div class="table-wrapper"><table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>Ruby LSP: Start</td> <td>Start the Ruby LSP server</td> </tr> <tr> <td>Ruby LSP: Restart</td> <td>Restart the Ruby LSP server</td> </tr> <tr> <td>Ruby LSP: Stop</td> <td>Stop the Ruby LSP server</td> </tr> <tr> <td>Ruby LSP: Update language server gem</td> <td>Updates the <code class="language-plaintext highlighter-rouge">ruby-lsp</code> server gem to the latest version</td> </tr> </tbody> </table></div> <h3 id="snippets"> <a href="#snippets" class="anchor-heading" aria-labelledby="snippets"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Snippets </h3> <p>This extension provides convenience snippets for common Ruby constructs, such as blocks, classes, methods or even unit test boilerplates. Find the full list <a href="https://github.com/Shopify/ruby-lsp/blob/main/vscode/snippets.json">here</a>.</p> <h3 id="configuration"> <a href="#configuration" class="anchor-heading" aria-labelledby="configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration </h3> <h4 id="enable-or-disable-features"> <a href="#enable-or-disable-features" class="anchor-heading" aria-labelledby="enable-or-disable-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Enable or disable features </h4> <p>The Ruby LSP allows disabling specific features. To do so, open the language status center right next to the language mode Ruby and select <code class="language-plaintext highlighter-rouge">Manage</code> right next to enabled features.</p> <p><img src="images/ruby_lsp_status_center.png" alt="Ruby LSP status center" /></p> <h4 id="ruby-version-managers"> <a href="#ruby-version-managers" class="anchor-heading" aria-labelledby="ruby-version-managers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ruby version managers </h4> <p>To boot the server properly, the Ruby LSP uses a version manager to activate the right environment variables that point Bundler to the Ruby and gem paths. This is especially necessary when switching between projects that use different Ruby versions - since those paths change and need to be reactivated.</p> <p>By default, the Ruby LSP will attempt to automatically determine which version manager it should use, checking which ones are available (<code class="language-plaintext highlighter-rouge">auto</code> option). If that fails, then the version manager must be manually configured. You can do so by clicking <code class="language-plaintext highlighter-rouge">Change version manager</code> in the language status center or by changing your VS Code user settings.</p> <div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Available options are</span><span class="w">
</span><span class="c1">// "auto" (select version manager automatically)</span><span class="w">
</span><span class="c1">// "none" (do not use a version manager)</span><span class="w">
</span><span class="c1">// "custom" (use rubyLsp.customRubyCommand for finding/activating Ruby)</span><span class="w">
</span><span class="c1">// "asdf"</span><span class="w">
</span><span class="c1">// "chruby"</span><span class="w">
</span><span class="c1">// "rbenv"</span><span class="w">
</span><span class="c1">// "rvm"</span><span class="w">
</span><span class="c1">// "shadowenv"</span><span class="w">
</span><span class="c1">// "mise"</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"rubyLsp.rubyVersionManager"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"chruby"</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>To make sure that the Ruby LSP can find the version manager scripts, make sure that they are loaded in the shell’s configuration script (e.g.: ~/.bashrc, ~/.zshrc) and that the SHELL environment variable is set and pointing to the default shell.</p> <blockquote class="note"> <p>For manager-specific notes, setting up custom activation for managers not listed above and community-contributed examples, please see <a href="version-managers">version managers</a>.</p> </blockquote> <h4 id="configuring-a-formatter"> <a href="#configuring-a-formatter" class="anchor-heading" aria-labelledby="configuring-a-formatter"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuring a formatter </h4> <p>The tool to be used for formatting files can be configured with the following setting.</p> <div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Available options</span><span class="w">
</span><span class="c1">//    auto: automatically detect the formatter based on the app's bundle (default)</span><span class="w">
</span><span class="c1">//    none: do not use a formatter (disables format on save and related diagnostics)</span><span class="w">
</span><span class="c1">//    all other options are the name of the formatter (e.g.: rubocop or syntax_tree)</span><span class="w">
</span><span class="nl">"rubyLsp.formatter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auto"</span><span class="w">
</span></code></pre></div></div> <h4 id="ruby-version-requirement"> <a href="#ruby-version-requirement" class="anchor-heading" aria-labelledby="ruby-version-requirement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ruby version requirement </h4> <p>By default, the Ruby LSP uses the current project’s Ruby version and bundle. This allows the LSP to index the correct gem versions, and to ensure formatting behavior is consistent with CI.</p> <p>The Ruby LSP and its main dependency <a href="https://github.com/ruby/prism">Prism</a> (the new Ruby parser) both follow the same policy, which is to support only Ruby versions that are not beyond their end-of-life.</p> <p>If you’re working on a project with an older Ruby version, it might be possible to install older versions of the server gem to get support for older rubies, but that might also involve using older versions of the VS Code extension - since some functionality requires implementations in both client and server.</p> <p>The other alternative is to use a custom Gemfile separate from the project with a different Ruby version. Notice that certain functionality may be degraded or require manual configuration, since the Ruby LSP will not be able to inspect the project’s real bundle to discover dependencies. Please see the instructions below.</p> <h4 id="using-a-custom-gemfile"> <a href="#using-a-custom-gemfile" class="anchor-heading" aria-labelledby="using-a-custom-gemfile"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using a custom Gemfile </h4> <p>If you are working on a project using an older version of Ruby not supported by Ruby LSP, then you may specify a separate <code class="language-plaintext highlighter-rouge">Gemfile</code> for development tools.</p> <p><strong>Note</strong>: when using this, gems will not be installed automatically and neither will <code class="language-plaintext highlighter-rouge">ruby-lsp</code> upgrades.</p> <p>Create a directory to store the composed bundle outside of the project that uses the old Ruby version. Inside that directory, add your preferred version manager configuration to select a supported Ruby version. For example, if using <code class="language-plaintext highlighter-rouge">chruby</code>, it would look like this:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># the/directory/.ruby-version</span>

3.2.2
</code></pre></div></div> <p>Create a <code class="language-plaintext highlighter-rouge">Gemfile</code> for development tools inside that directory.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># the/directory/Gemfile</span>

<span class="n">source</span> <span class="s2">"https://rubygems.org"</span>

<span class="n">gem</span> <span class="s2">"ruby-lsp"</span>
<span class="n">gem</span> <span class="s2">"rubocop"</span>
</code></pre></div></div> <blockquote class="note"> <p>Take in mind that formatters, linters and their extensions should be included in the custom gemfile; you might need to add more gems than the ones shown above. e.g: If you are using rubocop, you would also need to add them:</p> </blockquote> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gem</span> <span class="s2">"rubocop-packaging"</span>
<span class="n">gem</span> <span class="s2">"rubocop-performance"</span>
<span class="n">gem</span> <span class="s2">"rubocop-rspec"</span>
<span class="n">gem</span> <span class="s2">"rubocop-shopify"</span>
<span class="n">gem</span> <span class="s2">"rubocop-thread_safety"</span>
</code></pre></div></div> <p>Run <code class="language-plaintext highlighter-rouge">bundle install</code> inside that directory to generate a lockfile. After the directory contains the custom <code class="language-plaintext highlighter-rouge">Gemfile</code> and the version manager configuration, use the following configuration in VS Code to point the Ruby LSP to that <code class="language-plaintext highlighter-rouge">Gemfile</code>.</p> <div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"rubyLsp.bundleGemfile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"../../path/to/the/directory/Gemfile"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <blockquote class="note"> <p><code class="language-plaintext highlighter-rouge">rubyLsp.bundleGemfile</code> can be a relative or absolute path.</p> </blockquote> <h4 id="configuring-vs-code-debugger"> <a href="#configuring-vs-code-debugger" class="anchor-heading" aria-labelledby="configuring-vs-code-debugger"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuring VS Code debugger </h4> <p>To configure the VS Code debugger, you can use the “Debug: Add configuration…” command to create a <code class="language-plaintext highlighter-rouge">launch.json</code> file in the <code class="language-plaintext highlighter-rouge">.vscode</code> directory of your project.</p> <p>This command would generate the following configuration:</p> <div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"configurations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_lsp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Debug"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"launch"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby ${file}"</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_lsp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"launch"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Debug test file"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"program"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby -Itest ${relativeFile}"</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby_lsp"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attach"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Attach to existing server"</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">],</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="debugging-live-processes"> <a href="#debugging-live-processes" class="anchor-heading" aria-labelledby="debugging-live-processes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Debugging live processes </h3> <p>Instead of launching a process to debug every time, you may want to attach the VS Code debugger to an existing process, such as a Rails server. Follow these instructions to do so.</p> <p>Install <code class="language-plaintext highlighter-rouge">debug</code> gem. Verify by running <code class="language-plaintext highlighter-rouge">bundle exec rdbg -v</code></p> <p>Run your application with the debugger attached, so that the extension can connect to it.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle <span class="nb">exec </span>rdbg <span class="nt">-O</span> <span class="nt">-n</span> <span class="nt">-c</span> <span class="nt">--</span> bin/rails server <span class="nt">-p</span> 3000
</code></pre></div></div> <p>For better integrated rails tests support also install <code class="language-plaintext highlighter-rouge">ruby-lsp-rails</code> gem.</p> <h4 id="vs-code-configurations"> <a href="#vs-code-configurations" class="anchor-heading" aria-labelledby="vs-code-configurations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> VS Code configurations </h4> <p>In addition to the Ruby LSP’s own configuration, there are some VS Code settings that may need to be changed to get the most of the Ruby LSP. These settings are not specific to the Ruby LSP, but they impact all language servers and take precedence over any other configurations.</p> <p>These are the settings that may impact the Ruby LSP’s behavior and their explanations.</p> <div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="c1">// All of these settings are scoped only to the Ruby language</span><span class="w">
  </span><span class="nl">"[ruby]"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"editor.defaultFormatter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shopify.ruby-lsp"</span><span class="p">,</span><span class="w"> </span><span class="c1">// Use the Ruby LSP as the default formatter</span><span class="w">
    </span><span class="nl">"editor.formatOnSave"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// Format files automatically when saving</span><span class="w">
    </span><span class="nl">"editor.tabSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="c1">// Use 2 spaces for indentation</span><span class="w">
    </span><span class="nl">"editor.insertSpaces"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// Use spaces and not tabs for indentation</span><span class="w">
    </span><span class="nl">"editor.semanticHighlighting.enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// Enable semantic highlighting</span><span class="w">
    </span><span class="nl">"editor.formatOnType"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// Enable formatting while typing</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="multi-root-workspaces"> <a href="#multi-root-workspaces" class="anchor-heading" aria-labelledby="multi-root-workspaces"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Multi-root workspaces </h3> <p>Multi-root workspaces are VS Code’s way to allow users to organize a single repository into multiple distinct concerns. Notice that this does not necessarily match the concept of a project. For example, a web application with separate directories for its frontend and backend may be conceptually considered as a single project, but you can still configure the frontend and backend directories to be different workspaces.</p> <p>The advantage of adopting this configuration is that VS Code and all extensions are informed about which directories should be considered as possible workspace roots. Instead of having to configure each extension or tool individually so they are aware of your project structure, you only have to do that once for the entire repository.</p> <p>Some examples of functionality that benefits from multi-root workspaces:</p> <ul> <li>Extensions that have to integrate with project dependencies (Gemfile, package.json), such as debuggers, language servers, formatters and other tools, are informed about where to search for these files (allowing for automatic detection)</li> <li>If <code class="language-plaintext highlighter-rouge">launch.json</code> configurations are placed inside a workspace, VS Code will know to launch them from the appropriate directory (<a href="https://github.com/Shopify/ruby-lsp/blob/main/vscode/.vscode/launch.json">Ruby LSP example</a>), without requiring you to specify the <code class="language-plaintext highlighter-rouge">cwd</code></li> <li>When opening a terminal, VS Code will offer to open the terminal on all configured workspaces</li> </ul> <p>The Ruby LSP supports multi-root workspaces by spawning a separate language server for each one of them. This strategy is preferred over a single language server that supports multiple workspaces because each workspace could be using a different Ruby version and completely different gems - which would be impossible to support in a single Ruby process.</p> <p>What matters to properly spawn the Ruby LSP is knowing where the main Gemfile of each workspace inside of the same repository is.</p> <h4 id="example-configurations"> <a href="#example-configurations" class="anchor-heading" aria-labelledby="example-configurations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example configurations </h4> <blockquote class="note"> <p>To make sure Ruby LSP works well with your multi-root workspace project, please read through the instructions below and configure it following the examples. After configuring, do not forget to tell VS Code to open the workspace from the code-workspace file</p> </blockquote> <p>Consider a project where the top level of the repository is a Rails application and a sub-directory called <code class="language-plaintext highlighter-rouge">frontend</code> contains a React application that implements the frontend layer.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>my_project/
  frontend/
  Gemfile
  Gemfile.lock
  config.ru
  super_awesome_project.code-workspace
</code></pre></div></div> <p>A possible configuration for the <code class="language-plaintext highlighter-rouge">super_awesome_project</code> would be this:</p> <div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"folders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="c1">// At the top level of the repository, we have the Rails application</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rails"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"."</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="c1">// Inside the frontend directory, we have the React frontend</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"react"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frontend"</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c1">// To avoid having VS Code display the same files twice, we can simply exclude the frontend sub-directory. This</span><span class="w">
    </span><span class="c1">// means it will only show up as a separate workspace</span><span class="w">
    </span><span class="nl">"files.exclude"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"frontend"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>Now consider a monorepo where both the client and the server are under sub-directories.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>my_project/
  client/
  server/
    Gemfile
    Gemfile.lock
  super_awesome_project.code-workspace
</code></pre></div></div> <p>In this case, we can configure the workspaces as:</p> <div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"folders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="c1">// Both parts of the project (client and server) are inside sub-directories. But since the top level might contain</span><span class="w">
    </span><span class="c1">// some documentation or build files, we still want it to show up</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"awesome_project"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"."</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="c1">// Inside the client directory, we have the client part of the project</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client"</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="c1">// Inside the server directory, we have the server part of the project</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"server"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"server"</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c1">// We don't want to show duplicates, so we hide the directories that are already showing up as workspaces</span><span class="w">
    </span><span class="nl">"files.exclude"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"server"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"client"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>For more information, read VS Code’s <a href="https://code.visualstudio.com/docs/editor/workspaces">workspace documentation</a> and <a href="https://code.visualstudio.com/docs/editor/workspaces#_multiroot-workspaces">multi-root workspace documentation</a>.</p> <h3 id="developing-on-containers"> <a href="#developing-on-containers" class="anchor-heading" aria-labelledby="developing-on-containers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Developing on containers </h3> <p>The Ruby LSP is a detached language server, which means it’s a background process that runs separately from the VS Code instance. To provide its functionality, the Ruby LSP must be running in the same place where your project files exist and dependencies are installed.</p> <p>VS Code supports connecting to containers out of the box, which makes all editor features work seamlessly. That includes language servers, the integrated terminal, etc. The VS Code documentation has instructions on how to develop on containers locally or remotely. Please check the following resources before opening an issue:</p> <ul> <li><a href="https://code.visualstudio.com/docs/devcontainers/containers">Developing inside a Container</a></li> <li><a href="https://code.visualstudio.com/remote/advancedcontainers/overview">Advanced container configuration</a></li> </ul> <p>Please note that only Docker is officially supported as a backend by the Dev Container extension. <sup><a href="https://code.visualstudio.com/remote/advancedcontainers/docker-options">1</a></sup></p> <h2 id="telemetry"> <a href="#telemetry" class="anchor-heading" aria-labelledby="telemetry"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Telemetry </h2> <p>The Ruby LSP does not collect any telemetry by default, but it supports hooking up to a private metrics service if desired. This can be useful if you’d like to understand adoption, performance or catch errors of the Ruby LSP within your team or company.</p> <p>To collect metrics, another VS Code extension (typically a private one) should define the command <code class="language-plaintext highlighter-rouge">getTelemetrySenderObject</code>. This command should return an object that implements the <a href="https://code.visualstudio.com/api/references/vscode-api#TelemetrySender">vscode.TelemetrySender</a> interface, thus defining where data and error reports should be sent to. For example:</p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Your private VS Code extension</span>

<span class="kd">class</span> <span class="nc">Telemetry</span> <span class="k">implements</span> <span class="nx">vscode</span><span class="p">.</span><span class="nx">TelemetrySender</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Initialize some API service or whatever is needed to collect metrics</span>
  <span class="p">}</span>

  <span class="nf">sendEventData</span><span class="p">(</span><span class="nx">eventName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">data</span><span class="p">:</span> <span class="nx">EventData</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="c1">// Send events to some API or accumulate them to be sent in batch when `flush` is invoked by VS Code</span>
  <span class="p">}</span>

  <span class="nf">sendErrorData</span><span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nb">Error</span><span class="p">,</span> <span class="nx">data</span><span class="p">?:</span> <span class="nb">Record</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="kr">any</span><span class="o">&gt;</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="c1">// Send errors to some API or accumulate them to be sent in batch when `flush` is invoked by VS Code</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nf">flush</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Optional function to flush accumulated events and errors</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">async</span> <span class="kd">function</span> <span class="nf">activate</span><span class="p">(</span><span class="nx">context</span><span class="p">:</span> <span class="nx">vscode</span><span class="p">.</span><span class="nx">ExtensionContext</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">telemetry</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Telemetry</span><span class="p">();</span>
  <span class="k">await</span> <span class="nx">telemetry</span><span class="p">.</span><span class="nf">activate</span><span class="p">();</span>

  <span class="c1">// Register the command that the Ruby LSP will search for to hook into</span>
  <span class="nx">context</span><span class="p">.</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span>
    <span class="nx">vscode</span><span class="p">.</span><span class="nx">commands</span><span class="p">.</span><span class="nf">registerCommand</span><span class="p">(</span><span class="dl">"</span><span class="s2">getTelemetrySenderObject</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">telemetry</span><span class="p">;</span>
    <span class="p">}),</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="formatting"> <a href="#formatting" class="anchor-heading" aria-labelledby="formatting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Formatting </h2> <p>When <code class="language-plaintext highlighter-rouge">rubyLsp.formatter</code> is set to <code class="language-plaintext highlighter-rouge">auto</code>, Ruby LSP tries to determine which formatter to use.</p> <p>If the bundle has a <strong>direct</strong> dependency on a supported formatter, such as <code class="language-plaintext highlighter-rouge">rubocop</code> or <code class="language-plaintext highlighter-rouge">syntax_tree</code>, that will be used. Otherwise, formatting will be disabled and you will need add one to the bundle. Using globally installed formatters or linters is not supported, they must in your Gemfile or gemspec.</p> <h2 id="indexing-configuration"> <a href="#indexing-configuration" class="anchor-heading" aria-labelledby="indexing-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Indexing Configuration </h2> <p>To configure indexing, pass a JSON hash as part of the Ruby LSP configuration, for example:</p> <div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// PROJECT/.vscode/settings.json</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"rubyLsp.indexing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"excludedPatterns"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"**/test/**/*.rb"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"includedPatterns"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"**/bin/**/*"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"excludedGems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"rubocop"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rubocop-performance"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"excludedMagicComments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"compiled:true"</span><span class="p">],</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <hr> <h2 class="text-delta">Table of contents</h2> <ul> <li> <a href="/ruby-lsp/test_explorer.html">Test explorer</a> </li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
